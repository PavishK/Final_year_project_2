<div class="p-6 max-w-3xl mx-auto">
  <h1 class="text-2xl font-bold text-center mb-4">Manage States</h1>

  <!-- Add/Edit State Form -->
  <div class="bg-white p-4 rounded-lg shadow-md mb-4">
    <h2 class="text-lg font-semibold mb-2">{{ editMode ? 'Edit State' : 'Add New State' }}</h2>

    <label class="block mb-1 font-medium">District Name</label>
    <input type="text" [(ngModel)]="currentState.name" class="border p-2 w-full rounded mb-2" placeholder="Enter state name" />

    <label class="block mb-1 font-medium">State Name</label>
    <input type="text" [(ngModel)]="currentState.state" class="border p-2 w-full rounded mb-2" placeholder="Enter country/region" />

    <label class="block mb-1 font-medium">Charge</label>
    <input type="number" [(ngModel)]="currentState.charge" class="border p-2 w-full rounded mb-2" placeholder="Enter charge amount" />

    <label class="flex items-center space-x-2">
      <input type="checkbox" [(ngModel)]="currentState.isAvailable" />
      <span>Available</span>
    </label>

    <div class="flex space-x-2 mt-3">
      <button *ngIf="!editMode" class="bg-blue-500 text-white px-4 py-2 rounded w-full" (click)="submitState()">
        {{ 'Add' }}
      </button>

      <button *ngIf="editMode" class="bg-blue-500 text-white px-4 py-2 rounded w-full" (click)="submitState()">
        Update
      </button>

      <button *ngIf="editMode" class="bg-gray-500 text-white px-4 py-2 rounded w-full" (click)="resetForm()">
        Cancel
      </button>
    </div>
  </div>

  <!-- State List -->
  <div class="bg-white p-4 rounded-lg shadow-md">
    <h2 class="text-lg font-semibold mb-2">States List</h2>
    <table class="w-full border-collapse">
      <thead>
        <tr class="bg-gray-200">
          <th class="p-2">Name</th>
          <th class="p-2">State</th>
          <th class="p-2">Charge</th>
          <th class="p-2">Available</th>
          <th class="p-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let state of states; let i = index" class="border-t">
          <td class="p-2">{{ state.name }}</td>
          <td class="p-2">{{ state.state }}</td>
          <td class="p-2">{{ state.charge }}</td>
          <td class="p-2">
            <span class="text-green-600 font-semibold" *ngIf="state.isAvailable">Yes</span>
            <span class="text-red-600 font-semibold" *ngIf="!state.isAvailable">No</span>
          </td>
          <td class="p-2 space-x-2">
            <button class="bg-yellow-500 text-white px-3 py-1 rounded" (click)="editState(i)">
              Edit
            </button>
            <button class="bg-red-500 text-white px-3 py-1 rounded" (click)="deleteState(state._id,state.state)">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


<app-loading-spinner [isLoading]="makeLoading"></app-loading-spinner>
